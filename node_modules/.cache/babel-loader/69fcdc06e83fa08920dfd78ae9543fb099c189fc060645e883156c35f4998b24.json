{"ast":null,"code":"var _jsxFileName = \"/Users/gabuzo/workspace/git/ai/build/src/components/MapView.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport PinPopup from \"./PinPopup\";\nimport { Polyline } from \"react-leaflet\";\n\n// Define selected icon outside the component to avoid recreation\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst selectedIcon = L.icon({\n  iconUrl: \"https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n  shadowSize: [41, 41]\n});\n\n// Fix default marker icon issue with Leaflet in React\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nconst AUSTRALIA_CENTER = [-25.2744, 133.7751];\nconst AUSTRALIA_BOUNDS = [[-44, 112],\n// Southwest\n[-10, 154] // Northeast\n];\nfunction MapClickHandler({\n  onMapClick\n}) {\n  _s();\n  useMapEvents({\n    click: e => {\n      if (onMapClick) onMapClick(e);\n    }\n  });\n  return null;\n}\n_s(MapClickHandler, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n  return [useMapEvents];\n});\n_c = MapClickHandler;\nconst MapView = ({\n  pins,\n  onMapClick,\n  onMediaUpload,\n  onPinSelect,\n  selectedPins,\n  travelTrace\n}) => /*#__PURE__*/_jsxDEV(MapContainer, {\n  center: AUSTRALIA_CENTER,\n  zoom: 4,\n  minZoom: 3,\n  maxZoom: 10,\n  className: \"h-screen w-screen\",\n  maxBounds: AUSTRALIA_BOUNDS,\n  maxBoundsViscosity: 1.0,\n  children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(MapClickHandler, {\n    onMapClick: onMapClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this), pins.map((pin, idx) => /*#__PURE__*/_jsxDEV(Marker, {\n    position: pin.coords,\n    eventHandlers: {\n      click: () => onPinSelect(idx)\n    },\n    icon: selectedPins.includes(idx) ? selectedIcon : undefined,\n    children: /*#__PURE__*/_jsxDEV(Popup, {\n      children: /*#__PURE__*/_jsxDEV(PinPopup, {\n        pin: pin,\n        onMediaUpload: files => onMediaUpload(idx, files)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)\n  }, idx, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 7\n  }, this)), travelTrace && /*#__PURE__*/_jsxDEV(Polyline, {\n    positions: travelTrace,\n    pathOptions: {\n      color: \"#2563eb\",\n      dashArray: \"8 12\",\n      weight: 4\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 70,\n  columnNumber: 3\n}, this);\n_c2 = MapView;\nexport default MapView;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapClickHandler\");\n$RefreshReg$(_c2, \"MapView\");","map":{"version":3,"names":["React","MapContainer","TileLayer","Marker","Popup","useMapEvents","L","PinPopup","Polyline","jsxDEV","_jsxDEV","selectedIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","shadowUrl","shadowSize","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","AUSTRALIA_CENTER","AUSTRALIA_BOUNDS","MapClickHandler","onMapClick","_s","click","e","_c","MapView","pins","onMediaUpload","onPinSelect","selectedPins","travelTrace","center","zoom","minZoom","maxZoom","className","maxBounds","maxBoundsViscosity","children","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","map","pin","idx","position","coords","eventHandlers","includes","undefined","files","positions","pathOptions","color","dashArray","weight","_c2","$RefreshReg$"],"sources":["/Users/gabuzo/workspace/git/ai/build/src/components/MapView.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Popup,\n  useMapEvents,\n} from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport PinPopup from \"./PinPopup\";\nimport { Pin } from \"../types\";\nimport { Polyline } from \"react-leaflet\";\n\n// Define selected icon outside the component to avoid recreation\nconst selectedIcon = L.icon({\n  iconUrl:\n    \"https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n  shadowSize: [41, 41],\n});\n\n// Fix default marker icon issue with Leaflet in React\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n});\n\nconst AUSTRALIA_CENTER: [number, number] = [-25.2744, 133.7751];\nconst AUSTRALIA_BOUNDS: [[number, number], [number, number]] = [\n  [-44, 112], // Southwest\n  [-10, 154], // Northeast\n];\n\ninterface MapViewProps {\n  pins: Pin[];\n  onMapClick: (e: any) => void;\n  onMediaUpload: (pinIdx: number, files: FileList) => void;\n  onPinSelect: (pinIdx: number) => void;\n  selectedPins: number[];\n  travelTrace: [number, number][] | null;\n}\n\nfunction MapClickHandler({ onMapClick }: { onMapClick: (e: any) => void }) {\n  useMapEvents({\n    click: (e) => {\n      if (onMapClick) onMapClick(e);\n    },\n  });\n  return null;\n}\n\nconst MapView: React.FC<MapViewProps> = ({\n  pins,\n  onMapClick,\n  onMediaUpload,\n  onPinSelect,\n  selectedPins,\n  travelTrace,\n}) => (\n  <MapContainer\n    center={AUSTRALIA_CENTER}\n    zoom={4}\n    minZoom={3}\n    maxZoom={10}\n    className=\"h-screen w-screen\"\n    maxBounds={AUSTRALIA_BOUNDS}\n    maxBoundsViscosity={1.0}\n  >\n    <TileLayer\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    />\n    <MapClickHandler onMapClick={onMapClick} />\n    {pins.map((pin, idx) => (\n      <Marker\n        key={idx}\n        position={pin.coords}\n        eventHandlers={{\n          click: () => onPinSelect(idx),\n        }}\n        icon={selectedPins.includes(idx) ? selectedIcon : undefined}\n      >\n        <Popup>\n          <PinPopup\n            pin={pin}\n            onMediaUpload={(files) => onMediaUpload(idx, files)}\n          />\n        </Popup>\n      </Marker>\n    ))}\n    {travelTrace && (\n      <Polyline\n        positions={travelTrace}\n        pathOptions={{\n          color: \"#2563eb\",\n          dashArray: \"8 12\",\n          weight: 4,\n        }}\n      />\n    )}\n  </MapContainer>\n);\n\nexport default MapView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}