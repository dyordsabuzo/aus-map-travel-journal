{"ast":null,"code":"var _jsxFileName = \"/Users/gabuzo/workspace/git/ai/build/src/components/MapView.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, Polyline } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport PinPopup from \"./PinPopup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Define selected icon outside the component to avoid recreation\nconst selectedIcon = L.icon({\n  iconUrl: \"https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n  shadowSize: [41, 41]\n});\n\n// Fix default marker icon issue with Leaflet in React\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nconst AUSTRALIA_CENTER = [-25.2744, 133.7751];\nconst AUSTRALIA_BOUNDS = [[-44, 112],\n// Southwest\n[-10, 154] // Northeast\n];\nfunction MapClickHandler({\n  onMapClick\n}) {\n  _s();\n  useMapEvents({\n    click: e => {\n      if (onMapClick) onMapClick(e);\n    }\n  });\n  return null;\n}\n_s(MapClickHandler, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n  return [useMapEvents];\n});\n_c = MapClickHandler;\nconst MapView = ({\n  pins,\n  onMapClick,\n  onMediaUpload,\n  startIdx,\n  endIdx,\n  onSetStart,\n  onSetEnd\n}) => /*#__PURE__*/_jsxDEV(MapContainer, {\n  center: AUSTRALIA_CENTER,\n  zoom: 4,\n  minZoom: 4,\n  maxZoom: 19,\n  className: \"h-screen w-screen\",\n  maxBounds: AUSTRALIA_BOUNDS,\n  maxBoundsViscosity: 1.0,\n  children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(MapClickHandler, {\n    onMapClick: onMapClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this), pins.map((pin, idx) => /*#__PURE__*/_jsxDEV(Marker, {\n    position: pin.coords,\n    children: /*#__PURE__*/_jsxDEV(Popup, {\n      children: [/*#__PURE__*/_jsxDEV(PinPopup, {\n        pin: pin,\n        onMediaUpload: files => onMediaUpload(idx, files)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2 mt-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-2 py-1 rounded text-white ${startIdx === idx ? \"bg-green-600\" : \"bg-green-400 hover:bg-green-600\"}`,\n          onClick: () => onSetStart(idx),\n          disabled: startIdx === idx,\n          children: startIdx === idx ? \"Start Point\" : \"Set as Start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-2 py-1 rounded text-white ${endIdx === idx ? \"bg-blue-600\" : \"bg-blue-400 hover:bg-blue-600\"}`,\n          onClick: () => onSetEnd(idx),\n          disabled: endIdx === idx,\n          children: endIdx === idx ? \"End Point\" : \"Set as End\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)\n  }, idx, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 7\n  }, this)), pins.map((pin, idx) => pin.travels.map((travel, tIdx) => {\n    const targetPin = pins[travel.to];\n    if (!targetPin || !travel.route) return null;\n    return /*#__PURE__*/_jsxDEV(Polyline, {\n      positions: travel.route,\n      pathOptions: {\n        color: \"#2563eb\",\n        dashArray: \"8 12\",\n        weight: 4,\n        opacity: 0.7\n      }\n    }, `travel-${idx}-${travel.to}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }, this);\n  }))]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 72,\n  columnNumber: 3\n}, this);\n_c2 = MapView;\nexport default MapView;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapClickHandler\");\n$RefreshReg$(_c2, \"MapView\");","map":{"version":3,"names":["React","MapContainer","TileLayer","Marker","Popup","useMapEvents","Polyline","L","PinPopup","jsxDEV","_jsxDEV","selectedIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","shadowUrl","shadowSize","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","AUSTRALIA_CENTER","AUSTRALIA_BOUNDS","MapClickHandler","onMapClick","_s","click","e","_c","MapView","pins","onMediaUpload","startIdx","endIdx","onSetStart","onSetEnd","center","zoom","minZoom","maxZoom","className","maxBounds","maxBoundsViscosity","children","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","map","pin","idx","position","coords","files","onClick","disabled","travels","travel","tIdx","targetPin","to","route","positions","pathOptions","color","dashArray","weight","opacity","_c2","$RefreshReg$"],"sources":["/Users/gabuzo/workspace/git/ai/build/src/components/MapView.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Popup,\n  useMapEvents,\n  Polyline,\n} from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport PinPopup from \"./PinPopup\";\nimport { Pin } from \"../types\";\n\n// Define selected icon outside the component to avoid recreation\nconst selectedIcon = L.icon({\n  iconUrl:\n    \"https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n  shadowSize: [41, 41],\n});\n\n// Fix default marker icon issue with Leaflet in React\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n});\n\nconst AUSTRALIA_CENTER: [number, number] = [-25.2744, 133.7751];\nconst AUSTRALIA_BOUNDS: [[number, number], [number, number]] = [\n  [-44, 112], // Southwest\n  [-10, 154], // Northeast\n];\n\ninterface MapViewProps {\n  pins: Pin[];\n  onMapClick: (e: any) => void;\n  onMediaUpload: (pinIdx: number, files: FileList) => void;\n  startIdx: number | null;\n  endIdx: number | null;\n  onSetStart: (idx: number) => void;\n  onSetEnd: (idx: number) => void;\n}\n\nfunction MapClickHandler({ onMapClick }: { onMapClick: (e: any) => void }) {\n  useMapEvents({\n    click: (e) => {\n      if (onMapClick) onMapClick(e);\n    },\n  });\n  return null;\n}\n\nconst MapView: React.FC<MapViewProps> = ({\n  pins,\n  onMapClick,\n  onMediaUpload,\n  startIdx,\n  endIdx,\n  onSetStart,\n  onSetEnd,\n}) => (\n  <MapContainer\n    center={AUSTRALIA_CENTER}\n    zoom={4}\n    minZoom={4}\n    maxZoom={19}\n    className=\"h-screen w-screen\"\n    maxBounds={AUSTRALIA_BOUNDS}\n    maxBoundsViscosity={1.0}\n  >\n    <TileLayer\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    />\n    <MapClickHandler onMapClick={onMapClick} />\n    {pins.map((pin, idx) => (\n      <Marker key={idx} position={pin.coords}>\n        <Popup>\n          <PinPopup\n            pin={pin}\n            onMediaUpload={(files) => onMediaUpload(idx, files)}\n          />\n          <div className=\"flex flex-col gap-2 mt-2\">\n            <button\n              className={`px-2 py-1 rounded text-white ${startIdx === idx ? \"bg-green-600\" : \"bg-green-400 hover:bg-green-600\"}`}\n              onClick={() => onSetStart(idx)}\n              disabled={startIdx === idx}\n            >\n              {startIdx === idx ? \"Start Point\" : \"Set as Start\"}\n            </button>\n            <button\n              className={`px-2 py-1 rounded text-white ${endIdx === idx ? \"bg-blue-600\" : \"bg-blue-400 hover:bg-blue-600\"}`}\n              onClick={() => onSetEnd(idx)}\n              disabled={endIdx === idx}\n            >\n              {endIdx === idx ? \"End Point\" : \"Set as End\"}\n            </button>\n          </div>\n        </Popup>\n      </Marker>\n    ))}\n    {/* Draw dashed lines for all travels using route geometry */}\n    {pins.map((pin, idx) =>\n      pin.travels.map((travel, tIdx) => {\n        const targetPin = pins[travel.to];\n        if (!targetPin || !travel.route) return null;\n        return (\n          <Polyline\n            key={`travel-${idx}-${travel.to}`}\n            positions={travel.route}\n            pathOptions={{\n              color: \"#2563eb\",\n              dashArray: \"8 12\",\n              weight: 4,\n              opacity: 0.7,\n            }}\n          />\n        );\n      }),\n    )}\n  </MapContainer>\n);\n\nexport default MapView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}